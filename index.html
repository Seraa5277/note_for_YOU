<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Note for You ‚ù§Ô∏è</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Georgia&display=swap" rel="stylesheet">

  <style>
    /* Reset */
    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    html, body {
      height: 100%;
      width: 100%;
      overflow: hidden; /* no visible page scrollbars (we use internal scrolling) */
      background: #000;
      font-family: 'Georgia', serif;
      display: flex;
      justify-content: center;
      align-items: center;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Video background: cover whole viewport, centered, on z layer behind content */
    .bg-video {
      position: fixed;
      inset: 0; /* top:0; right:0; bottom:0; left:0; */
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center center;
      z-index: 0; /* place behind content but above background */
      opacity: 0.72; /* reduced by 10% from previous 0.82 -> now 0.72 */
      pointer-events: none;
      transform-origin: center center;
      transition: transform 12s ease; /* slowed down transition for gentler zoom */
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      will-change: transform, opacity;
      visibility: hidden; /* start hidden until we confirm it can play or load */
      background: #000;
    }

    /* gentle slow zoom-in effect */
    .bg-video.zoom-in {
      transform: scale(1.04); /* subtle, slower zoom */
    }
    .bg-video.zoom-out {
      transform: scale(1.0);
    }

    /* Content wrapper: internal scroll allowed but scrollbar hidden */
    .content {
      position: relative;
      text-align: center;
      padding: 22px;
      width: 92%;
      max-width: 580px;
      margin: 20px;
      background: rgba(0,0,0,0.18);
      border-radius: 12px;
      z-index: 2; /* above video */
      backdrop-filter: blur(4px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.5);

      /* make content scrollable internally so long text is accessible without page scrollbar */
      max-height: calc(100vh - 48px);
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }

    /* Hide visible scrollbars while keeping scrolling possible (WebKit + Firefox + Edge) */
    .content::-webkit-scrollbar { width: 0; height: 0; display: none; }
    .content { scrollbar-width: none; -ms-overflow-style: none; } /* Firefox, IE */

    /* Text message fade-in */
    .message {
      opacity: 0;
      animation: fadeIn 1.6s forwards 0.6s;
    }

    .message h1 {
      font-size: 1.9rem;
      font-family: 'Dancing Script', cursive;
      color: #ffe6e6;
      margin-bottom: 12px;
      text-shadow: 0 0 6px rgba(0,0,0,0.6);
    }

    .message p {
      font-size: 1rem;
      line-height: 1.65;
      font-family: 'Georgia', serif;
      color: #fff0f5;
      text-shadow: 0 0 5px rgba(0,0,0,0.45);
      white-space: pre-wrap;
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(12px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    /* "Read note" overlay (soft) - use opacity/visibility for soft fade */
    .play-overlay {
      position: fixed;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(rgba(0,0,0,0.42), rgba(0,0,0,0.42));
      z-index: 20;
      pointer-events: none; /* disabled by default (until shown) */
      padding: 20px;

      /* start hidden but present so transitions can run */
      opacity: 0;
      visibility: hidden;
      transition: opacity 480ms ease, visibility 480ms ease;
    }
    .play-overlay.show {
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
    }

    .play-button {
      background: rgba(255,255,255,0.95);
      color: #000;
      padding: 14px 26px;
      border-radius: 999px;
      font-size: 1.05rem;
      cursor: pointer;
      box-shadow: 0 6px 22px rgba(0,0,0,0.35);
      border: none;
      outline: none;
      transform-origin: center;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      user-select: none;
      transition: transform 260ms cubic-bezier(.2,.9,.2,1), box-shadow 260ms ease, opacity 260ms ease;
    }
    .play-button:hover { transform: translateY(-4px) scale(1.01); box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
    .play-button:active { transform: translateY(-1px) scale(.998); }

    .play-button { animation: buttonIn 540ms cubic-bezier(.2,.9,.2,1); }
    @keyframes buttonIn {
      from { opacity: 0; transform: translateY(10px) scale(.98) }
      to   { opacity: 1; transform: translateY(0) scale(1) }
    }
    .play-button .label { animation: pulse 2.6s ease-in-out infinite; transform-origin:center; }
    @keyframes pulse {
      0% { transform: scale(1) }
      50% { transform: scale(1.02) }
      100% { transform: scale(1) }
    }

    /* Responsive tweaks */
    @media (max-width: 520px) {
      .message h1 { font-size: 1.6rem; }
      .message p { font-size: 0.98rem; }
      .content { padding: 16px; margin: 14px; max-width: 94%; }
      .bg-video { transition: transform 14s linear; }
    }
    @media (max-width: 360px) {
      .message h1 { font-size: 1.4rem; }
      .message p { font-size: 0.95rem; line-height: 1.5; }
    }
  </style>
</head>
<body>

  <!-- Video background: WebM + MP4 fallback; muted and playsinline -->
  <video id="bgVideo" class="bg-video zoom-out" autoplay muted loop playsinline preload="auto" poster="">
    <source src="video_bg.webm" type="video/webm" />
    <source src="video_bg.mp4" type="video/mp4" />
  </video>

  <!-- Content -->
  <div class="content" id="content">
    <div class="message">
      <h1>Hey my love ‚ù§Ô∏è</h1>
      <p>
         After I broke up with lalit, I was in pieces. I was shattered and I literally don't remember much. It's like my brain just washed the tantrums, the pain. I don't visually remember it, but I still know how it felt. How painful it was, I lost hope, I felt and I did lose myself. There is a lot of differences in me now. I do not know if all of them are healthy or not. But there was you. I remember, you were there. You held me when I was breaking down. You held all the pieces of me in your arms, you told me I'm alright. You became my hope, you became my reason to live, in this cruel, pathetic world. You became the reason of my existence. I was scared, I was still feeling lost when WE became a thing. I was scared what if I break down even worse. I had restless nights. No sleep in my eyes, thoughts crowding my mind, my body trembling with the thought of shattering down again, sometimes. I was still hurting. But you held me, you didn't say much but you held me. No matter how much I resisted, you held me. You always did. 
And I cannot describe how grateful  I am, to have you. You know, when I'm helpless and I'm really tired, when I cannot fight back. I cry, I cry like someone tore my heart out. And cry for help, I literally cry for someone to help me out of this. It was you always, I cried for you to help me. Although I knew, you're really far away rn, you can't help me. But it was always you, it was meant to be YOU. 
You, made me ME, again... 
Better than I ever was, I feel loved, I feel safe, I feel seen, I feel I found ME. And I'm grateful. 
Now, I know how it feels to be in love, I know the warmth of love. And you know, You're love is like a smooth mobving carousel, with baby pink, soft yellow and sky blue lights.  
I love you, sweetheartüíì 
      </p>
    </div>
  </div>

  <!-- Background music: loop only -->
  <audio id="bgMusic" loop>
    <source src="song_bg.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
  </audio>

  <!-- Read note overlay -->
  <div id="playOverlay" class="play-overlay" aria-hidden="true">
    <button id="playButton" class="play-button" aria-label="Read note">
      <span class="label">Read note</span>
    </button>
  </div>

  <script>
    const music = document.getElementById('bgMusic');
    const video = document.getElementById('bgVideo');
    const overlay = document.getElementById('playOverlay');
    const btn = document.getElementById('playButton');

    // Helper: show/hide overlay (using opacity/visibility so fade is soft)
    function showOverlay() {
      overlay.classList.add('show');
      overlay.setAttribute('aria-hidden','false');
    }
    function hideOverlay() {
      overlay.classList.remove('show');
      overlay.setAttribute('aria-hidden','true');
    }

    // When the page loads, start a slower, gentler zoom and try to play media.
    window.addEventListener('load', async () => {
      // start gentle slow zoom toggle for video (slower than before)
      try {
        // initial slow switch after a brief delay
        setTimeout(() => video.classList.replace('zoom-out','zoom-in'), 1200);
        // toggle every 14s to produce a slow breathing zoom
        setInterval(() => video.classList.toggle('zoom-in'), 14000);
      } catch(e) { /* ignore */ }

      // Reveal video when it can play to avoid flicker
      video.addEventListener('canplay', () => {
        video.style.visibility = 'visible';
        console.log('Video canplay: made visible.');
      }, { once: true });

      video.addEventListener('canplaythrough', () => {
        video.style.visibility = 'visible';
      }, { once: true });

      video.addEventListener('play', () => {
        video.style.visibility = 'visible';
      });

      video.addEventListener('error', (e) => {
        console.error('Background video load/play error:', e, video.currentSrc);
      });

      // Try to autoplay the muted video (usually allowed)
      try {
        await video.play();
        video.style.visibility = 'visible';
        console.log('Background video played/allowed.');
      } catch (err) {
        console.warn('Background video autoplay blocked or play failed:', err);
      }

      // Try to autoplay audio ‚Äî usually blocked; if blocked, show overlay.
      try {
        await music.play();
        console.log('Audio autoplayed.');
        hideOverlay();
      } catch (err) {
        console.warn('Audio autoplay blocked; showing "Read note" overlay.', err);
        showOverlay();
      }
    });

    // On overlay button click: start music (and ensure video plays) and hide overlay
    btn.addEventListener('click', async () => {
      try {
        await music.play();
        console.log('Music started after user click.');
      } catch (err) {
        console.error('Music failed to play after click:', err);
      }
      try { await video.play(); } catch(e) {}
      hideOverlay();
    });

    // Global first-gesture fallback (tap anywhere) to start audio/video if overlay shown
    function globalPlay() {
      if (overlay.classList.contains('show')) {
        music.play().then(() => {
          try { video.play(); } catch(e) {}
          hideOverlay();
        }).catch(()=>{ /* still blocked */ });
      } else {
        if (video.paused) video.play().catch(()=>{/* ignore */});
      }
      document.removeEventListener('click', globalPlay);
      document.removeEventListener('touchstart', globalPlay);
    }
    document.addEventListener('click', globalPlay);
    document.addEventListener('touchstart', globalPlay);

    // Debugging listeners
    music.addEventListener('error', (e) => {
      console.error('Audio loading error:', e, music.currentSrc);
    });
    video.addEventListener('stalled', () => {
      console.warn('Video stalled, check network or file format.');
    });

    // Accessibility: allow Enter/Space to activate button
    btn.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        btn.click();
      }
    });
  </script>

</body>
</html>
