<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Note for You ‚ù§Ô∏è</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Georgia&display=swap" rel="stylesheet">

  <style>
    /* Reset */
    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    html, body {
      height: 100%;
      width: 100%;
      overflow: hidden; /* keep no page scrollbar visible */
      background: #000;
      font-family: 'Georgia', serif;
      display: flex;
      justify-content: center;
      align-items: center;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Video background: very slow, subtle breathing zoom behind content */
    .bg-video {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center center;
      z-index: 0;
      opacity: 0.72; /* reduced opacity for easier reading */
      pointer-events: none;
      transform-origin: center center;
      will-change: transform, opacity;
      visibility: hidden; /* become visible once video can play */
      background: #000;
      animation: slowZoom 60s ease-in-out infinite alternate;
    }
    @keyframes slowZoom {
      0% { transform: scale(1); }
      100% { transform: scale(1.04); }
    }

    /* Content wrapper: internal scroll allowed but scrollbar hidden */
    .content {
      position: relative;
      text-align: center;
      padding: 22px;
      width: 92%;
      max-width: 580px;
      margin: 20px;
      background: rgba(0,0,0,0.18);
      border-radius: 12px;
      z-index: 2; /* above video */
      backdrop-filter: blur(4px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.5);

      /* internal scrolling for long message */
      max-height: calc(100vh - 48px);
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;

      /* hidden until user clicks "Read note" */
      opacity: 0;
      transform: translateY(12px);
      transition: opacity 720ms cubic-bezier(.2,.9,.2,1), transform 720ms cubic-bezier(.2,.9,.2,1);
      pointer-events: none;
    }
    .content.revealed {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    /* Hide visible scrollbars while keeping scrolling possible */
    .content::-webkit-scrollbar { width: 0; height: 0; display: none; }
    .content { scrollbar-width: none; -ms-overflow-style: none; }

    .message h1 {
      font-size: 1.9rem;
      font-family: 'Dancing Script', cursive;
      color: #ffe6e6;
      margin-bottom: 12px;
      text-shadow: 0 0 6px rgba(0,0,0,0.6);
    }
    .message p {
      font-size: 1rem;
      line-height: 1.65;
      font-family: 'Georgia', serif;
      color: #fff0f5;
      text-shadow: 0 0 5px rgba(0,0,0,0.45);
      white-space: pre-wrap;
    }

    /* Read note overlay (soft fade and subtle motion) */
    .play-overlay {
      position: fixed;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(rgba(0,0,0,0.42), rgba(0,0,0,0.42));
      z-index: 20;
      padding: 20px;

      opacity: 1;
      visibility: visible;
      transition: opacity 560ms ease, visibility 560ms ease;
    }
    .play-overlay.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    .play-button {
      background: rgba(255,255,255,0.95);
      color: #000;
      padding: 14px 28px;
      border-radius: 999px;
      font-size: 1.05rem;
      cursor: pointer;
      box-shadow: 0 6px 22px rgba(0,0,0,0.35);
      border: none;
      outline: none;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      user-select: none;
      transition: transform 320ms cubic-bezier(.2,.9,.2,1), box-shadow 320ms ease, opacity 320ms ease;
      opacity: 1;
    }
    .play-button:hover { transform: translateY(-4px) scale(1.01); box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
    .play-button:active { transform: translateY(-1px) scale(.998); }
    .play-button .label { animation: pulse 2.6s ease-in-out infinite; transform-origin:center; }
    @keyframes pulse { 0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)} }

    /* Responsive tweaks */
    @media (max-width: 520px) {
      .message h1 { font-size: 1.6rem; }
      .message p { font-size: 0.98rem; }
      .content { padding: 16px; margin: 14px; max-width: 94%; }
      .bg-video { animation-duration: 80s; } /* even slower on small screens */
    }
    @media (max-width: 360px) {
      .message h1 { font-size: 1.4rem; }
      .message p { font-size: 0.95rem; line-height: 1.5; }
    }
  </style>
</head>
<body>

  <!-- Background video (webm first, mp4 fallback). Muted so it can autoplay. -->
  <video id="bgVideo" class="bg-video" autoplay muted loop playsinline preload="auto" poster="">
    <source src="video_bg.webm" type="video/webm" />
    <source src="video_bg.mp4" type="video/mp4" />
  </video>

  <!-- Content (hidden by default until user clicks "Read note") -->
  <div class="content" id="content" aria-hidden="true">
    <div class="message">
      <h1>Hey,love ‚ù§Ô∏è</h1>
      <p>

 After I broke up with lalit, I was in pieces. I was shattered and I literally don't remember much. It's like my brain just washed the tantrums, the pain. I don't visually remember it, but I still know how it felt. How painful it was, I lost hope, I felt and I did lose myself. There is a lot of differences in me now. I do not know if all of them are healthy or not. But there was you. I remember, you were there. You held me when I was breaking down. You held all the pieces of me in your arms, you told me I'm alright. You became my hope, you became my reason to live, in this cruel, pathetic world. You became the reason of my existence. I was scared, I was still feeling lost when WE became a thing. I was scared what if I break down even worse. I had restless nights. No sleep in my eyes, thoughts crowding my mind, my body trembling with the thought of shattering down again, sometimes. I was still hurting. But you held me, you didn't say much but you held me. No matter how much I resisted, you held me. You always did. 
And I cannot describe how grateful  I am, to have you. You know, when I'm helpless and I'm really tired, when I cannot fight back. I cry, I cry like someone tore my heart out. And cry for help, I literally cry for someone to help me out of this. It was you always, I cried for you to help me. Although I knew, you're really far away rn, you can't help me. But it was always you, it was meant to be YOU. 
You, made me ME, again... 
Better than I ever was, I feel loved, I feel safe, I feel seen, I feel I found ME. And I'm grateful. 
Now, I know how it feels to be in love, I know the warmth of love. And you know, You're love is like a smooth moving carousel, with baby pink, soft yellow and sky blue lights.  
I love you, sweetheartüíì 
      
      </p>
    </div>
  </div>

  <!-- Background music: do not autoplay‚Äîplay on user gesture -->
  <audio id="bgMusic" loop preload="auto" crossorigin="anonymous">
    <source src="song_bg.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
  </audio>

  <!-- Read note overlay visible until user clicks -->
  <div id="playOverlay" class="play-overlay" role="dialog" aria-label="Start reading">
    <button id="playButton" class="play-button" aria-label="Read note">
      <span class="label">Read note</span>
    </button>
  </div>

  <script>
    const video = document.getElementById('bgVideo');
    const content = document.getElementById('content');
    const overlay = document.getElementById('playOverlay');
    const btn = document.getElementById('playButton');
    const music = document.getElementById('bgMusic');

    // Create (or reuse) an AudioContext so we can resume it on gesture (fixes Safari issues).
    const AudioCtxConstructor = window.AudioContext || window.webkitAudioContext || null;
    let audioCtx = null;
    if (AudioCtxConstructor) {
      try { audioCtx = new AudioCtxConstructor(); }
      catch(e) { audioCtx = null; }
    }

    // Reveal/hide helpers
    function showContent() {
      content.classList.add('revealed');
      content.setAttribute('aria-hidden', 'false');
    }
    function hideOverlay() {
      overlay.classList.add('hidden');
    }
    function showOverlay() {
      overlay.classList.remove('hidden');
    }

    // Ensure video becomes visible when it can play
    video.addEventListener('canplay', () => {
      video.style.visibility = 'visible';
    }, { once: true });
    video.addEventListener('error', (e) => {
      console.error('Video load/play error:', e, video.currentSrc);
    });

    // Try to start muted video on load (muted autoplay usually allowed)
    window.addEventListener('load', async () => {
      try {
        await video.play();
        video.style.visibility = 'visible';
      } catch (err) {
        // If video can't autoplay, it'll start after a gesture
        console.warn('Muted video play may be blocked until user gesture.', err);
      }

      // Keep content hidden until user activates.
      content.classList.remove('revealed');
      content.setAttribute('aria-hidden', 'true');
      showOverlay();
    });

    // Called on user gesture to resume AudioContext (if any) and play the media
    async function revealAndPlay() {
      // resume AudioContext (Safari/iOS often requires this)
      if (audioCtx && audioCtx.state === 'suspended') {
        try {
          await audioCtx.resume();
          console.log('AudioContext resumed.');
        } catch (e) {
          console.warn('AudioContext resume failed:', e);
        }
      }

      // Unmute and set a default volume to make sure audio isn't muted
      try {
        music.muted = false;
        // set a friendly default volume (0.0 - 1.0)
        if (typeof music.volume === 'number') music.volume = 0.85;
        // reset to start (optional)
        try { music.currentTime = 0; } catch(e){ /* some browsers may throw if not ready */ }
      } catch (e) {
        console.warn('Failed to set audio properties before play:', e);
      }

      // reveal the text with smooth transition
      showContent();
      // hide the overlay softly
      hideOverlay();

      // Attempt to play the audio element and ensure the video is playing too
      try {
        await music.play();
        console.log('Music started after user gesture.');
      } catch (err) {
        console.warn('Music play failed after user gesture:', err);
        // If audio fails, return the overlay so user can try again
        showOverlay();
        return;
      }

      try { await video.play(); } catch(e) { /* ignore */ }

      // Remove the global initial-gesture listeners after first successful activation
      document.removeEventListener('click', globalFirstGesture);
      document.removeEventListener('touchstart', globalFirstGesture);
    }

    // Button click handler
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      revealAndPlay();
    });

    // Keyboard accessibility
    btn.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        revealAndPlay();
      }
    });

    // Allow the very first user gesture anywhere to act as the activation (optional convenience)
    function globalFirstGesture(e) {
      if (!overlay.classList.contains('hidden')) {
        revealAndPlay();
      }
    }
    document.addEventListener('click', globalFirstGesture, { passive: true });
    document.addEventListener('touchstart', globalFirstGesture, { passive: true });

    // Helpful debug logs if media fails to load
    music.addEventListener('error', (e) => {
      console.error('Audio loading error:', e, music.currentSrc);
      // If audio can't be loaded, keep the overlay hidden so user can still read the note
    });
    video.addEventListener('stalled', () => {
      console.warn('Video stalled; check network or file format.');
    });
  </script>
</body>
</html>

